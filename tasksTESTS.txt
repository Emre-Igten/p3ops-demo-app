- name: Configure alma 
  hosts: alma         
  roles:                 
    - bertvv.rh-base
  tasks:
    - name: Include distribution specific variables
      include_vars: "{{ item }}"
      with_first_found:
        - "{{ ansible_distribution }}.yml"
        - "{{ ansible_os_family }}.yml"
    - name: Ensure the necessary (pip) packages are installed
      pip:
        name: "{{ dockerlab_pip_packages }}"
        state: present
    - name: Ensure the Docker group exists
      group:
        name: docker
        state: present
    - name: Ensure user Vagrant is a member of the Docker group
      user:
        name: vagrant
        groups:
          - docker
    - name: Ensure necessary services are running and enabled
      service:
        name: "{{ item }}"
        state: started
        enabled: true
      with_items: "{{ dockerlab_services }}"
    - name: Create a Docker volume for persistent data
      docker_volume:
        volume_name: "{{ item }}"
        state: present
      with_items: "{{ dockerlab_volumes }}"
 